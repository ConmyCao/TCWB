
**版本及修改记录**
<br>
v1.0 2018.9.28 创建本记录
<br>
<br>

#**通产伟博智慧云课堂后台管理接口工具及自动化接口单元测试**#

*本项目分为如下两个模块：①通产伟博智慧云课堂后台管理接口工具 ②自动化接口单元测试* 

*其中自动化接口单元测试分为两个脚本：admin.test.js和school.test.js，分别对应管理后台的通产模块和学校模块的接口测试 *
<br>

**执行自动化接口单元测试方式**

`npm run refresh`

`npm run test`

*npm run refresh为定义的清除数据库并重置（run seeder）*

*npm run test为运行Jest框架，项目中所有test.js脚本*

<br>
**启动通产伟博智慧云课堂后台管理接口工具方式**

`npm start`

*执行后请访问http://localhost:4567/api-docs/#/*

*可在index.js里配置该地址及端口，如有需要清修改swagger.yaml以修改接口文档*

<br>
##**以下为全部测试内容**##

<br>
#**通产端测试**#

* 创建某无权限角色  
    * 创建某无权限角色   
        * Admin登录
        * 创建无权限角色
        * 创建其下用户
        * 修改该角色至无权限  
 
* 创建修改学校并验证  
    * 创建修改学校   
        * Admin登录
        * 获取科目
        * 创建学校
        * 修改学校
    * 验证该学校   
        * 查询到该学校
        * 错误用户名密码登录(拒绝)
        * 登录学校初始用户
    * 登录无权限用户并执行以上操作(拒绝)   

* 创建无权限角色、用户、电子书、章节、资源目录并验证 
    * 创建无权限用户   
        * Admin登录
        * 创建无权限角色
        * 创建其下用户
        * 修改该角色              
    * 创建电子课本、（子）章节、（子）资源目录并验证  
        * Admin登录
        * 获取科目
        * 获取年级
        * 创建电子课本
        * 修改电子课本
        * 创建电子书章节
        * 创建电子书子章节
        * 修改电子书章节
        * 修改电子书子章节
        * 查看电子书章节
        * 查看电子书子章节
        * 创建电子书资源目录
        * 创建电子书子资源目录
        * 修改电子书资源目录
        * 修改电子书子资源目录            
        * 查看电子书资源目录
        * 查看电子书子资源目录
    * 登录无权限用户并执行以上操作(拒绝)          
        

* 通过知识点添加课本资源
    * 获取电子课本章节   
        * Admin登录
        * 获取到电子课本
        * 获取电子书章节
    * 添加课本资源   
        * 从资源管理获取学科内容
        * 从学科获取(子)知识点
        * 通过知识点获取文档
        * 通过itemid获取文档资源
        * post文档资源data：通过知识点添加文档至课本资源目录          

* 通过教材册别、章节添加课本资源
    * 获取电子课本章节   
        * Admin登录
        * 获取到电子课本
        * 获取电子书章节
    * 添加课本资源   
        * 从资源管理获取学科内容
        * 从学科获取教材类别
        * 从教材册别获取课本
        * 从Bookid获取(子)章节
        * 通过章节获取文档资源list   
        * 通过itemid获取文档资源data
        * post文档资源data：通过章节添加文档至课本资源目录

* 创建、修改并查询日程
    * 登录查询   
        * Admin登录
        * 获取个人账户ID
    * 添加课本资源   
        * 创建日程
        * 修改日程
        * 查询到该日程
    * 登录无权限用户并执行以上操作(拒绝) 

* 创建、修改并查询角色、用户、权限
    * 创建修改查询角色   
        * Admin登录
        * 创建角色
        * 修改角色
        * 查询到该角色        
    * 创建修改查询用户   
        * 创建用户
        * 修改用户
        * 查询到该用户
    * 修改角色权限        
    * 登录无权限用户并执行以上操作(拒绝)    

<br>

#**学校端测试**#

* 创建学校  
    * 创建学校   
        * Admin登录
        * 获取科目
        * 创建学校

* 创建、修改并查询角色、用户、权限  
    * 创建并修改角色至无权限   
        * 学校初始管理员登录
        * 创建角色
        * 创建用户
        * 修改角色至无权限
    * 创建、修改、查询角色   
        * 创建角色
        * 修改角色
        * 查询到该角色
    * 创建、修改、查询用户   
        * 创建用户
        * 修改用户
        * 查询到该用户
    * 修改角色权限 
    * 登录无权限用户并执行以上操作(拒绝)      


* 创建、修改并查询日程  
    * 创建、修改并查询日程   
        * 学校初始管理员登录
        * 获取登录用户信息
        * 创建日程
        * 修改日程
        * 查询到该日程
    * 登录无权限用户并执行以上操作(拒绝)
 

* 上传查询校本资源、学校资源  
    * 获取信息  
        * 失败登录
        * 学校初始管理员登录
        * 获取登录用户信息
    * 上传查询我的资源  
        * 上传我的资源
        * 查询到该我的资源
    * 上传查询校本资源  
        * 上传校本资源
        * 查询到该校本资源       
    * 登录无权限用户并执行以上操作(拒绝)


* 修改学校，创建修改查询班级、教师、学生、家长，发送消息
    * 修改学校  
        * 学校初始管理员登录
        * 获取个人信息
        * 获取科目信息
        * 修改学校        
    * 新增修改查询班级  
        * 新建班级
        * 修改班级
        * 修改到该班级
    * 新增修改查询教师  
        * 新建教师
        * 修改教师
        * 修改到该教师
    * 新增修改查询学生  
        * 新建学生
        * 修改学生
        * 修改到该学生
    * 新增修改查询家长  
        * 新建家长
        * 修改家长
        * 修改到该家长
    * 发送查询消息 
        * 发送消息
        * 查询到该消息    
    * 登录无权限用户并执行以上操作(拒绝)


* 微信功能
    * 获取信息  
        * 学校初始管理员登录
        * 获取个人信息      
    * 新增修改查询幻灯组  
        * 新建幻灯组
        * 修改幻灯组
        * 修改到该幻灯组
    * 新增修改查询幻灯片 
        * 新建幻灯片
        * 修改幻灯片
        * 修改到该幻灯片
    * 新增修改查询功能集 
        * 新建功能集
        * 修改功能集
        * 修改到该功能集
    * 新增修改查询栏目  
        * 新建栏目
        * 修改栏目
        * 修改到该栏目
    * 新增修改查询文章 
        * 新建文章
        * 修改文章
        * 修改到该文章        
    * 更新首页及公众号  
    * 登录无权限用户并执行以上操作(拒绝)
